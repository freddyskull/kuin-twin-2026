### Variables
@baseUrl = http://localhost:3001
@userId = {{createUser.response.body.id}}

### 1. Crear Usuario
# @name createUser
POST {{baseUrl}}/api/users
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123",
  "role": "CUSTOMER"
}

### 2. Crear Usuario Vendor
POST {{baseUrl}}/api/users
Content-Type: application/json

{
  "email": "vendor@example.com",
  "password": "password123",
  "role": "VENDOR"
}

### 3. Crear Usuario Admin
POST {{baseUrl}}/api/users
Content-Type: application/json

{
  "email": "admin@example.com",
  "password": "password123",
  "role": "ADMIN"
}

### 4. Obtener Todos los Usuarios
GET {{baseUrl}}/api/users

### 5. Obtener Usuario por ID
GET {{baseUrl}}/api/users/{{userId}}

### 6. Actualizar Usuario
PATCH {{baseUrl}}/api/users/{{userId}}
Content-Type: application/json

{
  "email": "updated@example.com"
}

### 7. Eliminar Usuario
DELETE {{baseUrl}}/api/users/{{userId}}

### 8. Error - Email Duplicado
POST {{baseUrl}}/api/users
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123"
}

### 9. Error - Email Inválido
POST {{baseUrl}}/api/users
Content-Type: application/json

{
  "email": "invalid-email",
  "password": "password123"
}

### 10. Error - Password Muy Corta
POST {{baseUrl}}/api/users
Content-Type: application/json

{
  "email": "test2@example.com",
  "password": "123"
}

### 11. Error - Usuario No Encontrado
GET {{baseUrl}}/api/users/00000000-0000-0000-0000-000000000000

### 12. Registro Anidado (Usuario + Perfil)
# @name registerNested
POST {{baseUrl}}/api/users/register
Content-Type: application/json

{
  "email": "nested@example.com",
  "password": "password123",
  "role": "VENDOR",
  "profile": {
    "displayName": "Freddy Skull",
    "bio": "Desarrollador Full Stack y Entusiasta de NestJS",
    "avatarUrl": "https://avatars.githubusercontent.com/u/1234567?v=4",
    "serviceRadiusKm": 25
  }
}

### 13. Crear/Actualizar Perfil (Usuario Existente)
@nestedUserId = {{registerNested.response.body.id}}
POST {{baseUrl}}/api/users/{{nestedUserId}}/profile
Content-Type: application/json

{
  "displayName": "Freddy Actualizado",
  "bio": "Nueva biografía para el perfil"
}

### 14. Agregar Item al Portafolio
# @name addPortfolio
POST {{baseUrl}}/api/portfolio/{{nestedUserId}}
Content-Type: application/json

{
  "imageUrl": "https://images.unsplash.com/photo-1461749280684-dccba630e2f6",
  "description": "Desarrollo de Software a medida",
  "imageGallery": [
    "https://images.unsplash.com/photo-1498050108023-c5249f4df085",
    "https://images.unsplash.com/photo-1504639725590-34d0984388bd"
  ],
  "dynamicAttributes": {
    "technologies": ["React", "NestJS", "PostgreSQL"],
    "deliveryTime": "15 days"
  }
}

### 15. Obtener Portafolio de Usuario
GET {{baseUrl}}/api/portfolio/user/{{nestedUserId}}

### 16. Eliminar Item del Portafolio
@portfolioItemId = {{addPortfolio.response.body.id}}
DELETE {{baseUrl}}/api/portfolio/{{portfolioItemId}}

### 17. Agregar Medio a la Galería (WP Style)
# @name addMedia
POST {{baseUrl}}/api/media/{{nestedUserId}}
Content-Type: application/json

{
  "url": "https://images.unsplash.com/photo-1517694712202-14dd9538aa97",
  "fileName": "laptop.jpg",
  "mimeType": "image/jpeg",
  "size": 102400,
  "alt": "Laptop para programación"
}

### 18. Obtener Galería de Medios de Usuario
GET {{baseUrl}}/api/media/user/{{nestedUserId}}

### 19. Eliminar Medio
@mediaId = {{addMedia.response.body.id}}
DELETE {{baseUrl}}/api/media/{{mediaId}}
